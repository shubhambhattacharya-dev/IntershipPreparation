

---

# ğŸ“˜ **ğŸ”¥ NODE.JS REVISION NOTES (Everything You Learned Till Now)**

---

# #ï¸âƒ£ **1. Event Loop â€” Full Summary**

### âœ” Event loop JS ko asynchronous banata hai

### âœ” JS single-threaded hota hai but async libuv se hota hai

### âœ” Event loop ke 6 phases hote hain:

1. Timers (setTimeout, setInterval)
2. Pending callbacks
3. Idle/prepare
4. Poll
5. **Check (setImmediate)**
6. Close callbacks

---

# #ï¸âƒ£ **2. Microtasks (Highest Priority)**

### Microtask Queue:

* **process.nextTick()** (Node special)
* Promises `.then()`

### Order:

```
Sync Code
â†’ process.nextTick()
â†’ Promises
â†’ Event loop phases
```

---

# #ï¸âƒ£ **3. process.nextTick()**

### âœ” Microtask queue

### âœ” Highest priority

### âœ” Event loop se pehle chalta hai

### âœ” Danger: **Microtask starvation** (infinite loop)

**Example of dangerous infinite loop:**

```js
let i = 0;
function repeat() {
    i++;
    console.log("Tick:", i);
    process.nextTick(repeat);  // event loop never starts
}
repeat();
```

### Use Cases:

* Validation
* Immediate callbacks
* Internal Node modules
* Promise-like behavior

---

# #ï¸âƒ£ **4. setImmediate()**

### âœ” Check phase me chalata hai

### âœ” nextTick se low priority

### âœ” nextTick dangerous â†’ setImmediate safe

### âœ” Heavy tasks ko next cycle me shift karta hai

### âœ” I/O ke baad run hota hai

**Typical order:**

```
nextTick > setImmediate
```

---

# #ï¸âƒ£ **5. setTimeout(0) vs setImmediate()**

### âœ” setImmediate â†’ next cycle (CHECK phase)

### âœ” setTimeout(0) â†’ Timers phase (slightly later)

Most cases:

```
setImmediate()
setTimeout(0)
```

---

# #ï¸âƒ£ **6. Promise â€” Ultra Summary**

### States:

* Pending
* Fulfilled (resolve)
* Rejected (reject)

### Properties:

âœ” Promise state **immutable**
âœ” .then() & .catch()
âœ” Promise chain new promise return karta

**Syntax:**

```js
new Promise((resolve, reject) => {...})
  .then(...)
  .catch(...)
```

---

# #ï¸âƒ£ **7. Async / Await**

### âœ” async function ALWAYS returns a Promise

### âœ” await = Promise ka result ruk ke deta hai

### âœ” try/catch for error handling

**Example:**

```js
async function test() {
  const data = await fetch(...);
}
```

Async/await inside becomes:

```
promise.then(...)
```

---

# #ï¸âƒ£ **8. Stream â€” Full Summary**

### Stream = Data ko chunk-by-chunk read/write karna

### Types:

* Readable
* Writable
* Duplex (read + write)
* Transform (modify)

### Why use Streams?

âœ” Memory efficient
âœ” Fast
âœ” Scalable
âœ” Large files handle karta hai
âœ” File upload/download
âœ” Video/audio streaming

**Example:**

```js
fs.createReadStream("big.txt").on("data", chunk => {
    console.log(chunk.length);
});
```

---

# #ï¸âƒ£ **9. Microtask Starvation (VERY IMPORTANT)**

Jab nextTick or promise repeatedly schedule ho:

```
microtask â†’ microtask â†’ microtask
```

Event loop phases run **Nahi hote** â†’ server freeze.


---

# #ï¸âƒ£ **10. Dog API (Fetch Example)**

**HTML + JS example (async/await):**

```js
async function getDog() {
    const res = await fetch("https://dog.ceo/api/breeds/image/random");
    const data = await res.json();
    console.log(data.message);
}
getDog();
```

---

# #ï¸âƒ£ **11. Random Indian Meme API**

**Endpoint:**

```
https://meme-api.com/gimme/IndianMeyMeys
```

**Fetch Example:**

```js
async function getMeme() {
    const res = await fetch("https://meme-api.com/gimme/IndianMeyMeys");
    const data = await res.json();
    console.log(data.url);
}
```

---

# #ï¸âƒ£ **12. nextTick vs setImmediate (Final Summary)**

| Feature  | nextTick                          | setImmediate             |
| -------- | --------------------------------- | ------------------------ |
| Queue    | Microtask                         | Check phase              |
| Runs     | Current phase ke immediately baad | Next event loop cycle    |
| Priority | Highest                           | Medium                   |
| Danger   | Freeze / starvation               | Safe                     |
| Use Case | Validation, tiny tasks            | Heavy tasks, I/O ke baad |

---

# ğŸ¯ **MASTER 3-LINE SUMMARY (Interview-Perfect)**

> **Node.js single-threaded sync code V8 me chalata hai,
> async libuv + event loop se hota hai.
> Microtasks (nextTick, Promises) event loop se pehle run hote hain.
> Streams large data ko chunks me handle karte hain.**

---

